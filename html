<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecurityScan Pro | Premium Security Scanner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --apple-black: #1d1d1f;
            --apple-dark-gray: #424245;
            --apple-gray: #86868b;
            --apple-light-gray: #d2d2d7;
            --apple-lighter-gray: #f5f5f7;
            --apple-white: #ffffff;
            --apple-blue: #0071e3;
            --apple-light-blue: #2997ff;
            --apple-green: #00b050;
            --apple-red: #ff3b30;
            --apple-yellow: #ffcc00;
            --apple-gold: #f5d742;
            --stripe-purple: #635bff;
            --paypal-blue: #003087;
            --paypal-light-blue: #009cde;
            
            --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.07);
            --hover-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            --font-sf: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', sans-serif;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --radius: 12px;
            --radius-lg: 20px;
        }
        
        body {
            font-family: var(--font-sf);
            background-color: var(--apple-lighter-gray);
            color: var(--apple-black);
            line-height: 1.47059;
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }
        
        /* Navigation */
        .apple-nav {
            backdrop-filter: saturate(180%) blur(20px);
            background: rgba(255, 255, 255, 0.92);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 52px;
            padding: 0 22px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .nav-brand {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 21px;
            color: var(--apple-black);
            text-decoration: none;
        }
        
        /* Payment System Styles */
        .payment-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .payment-method {
            background: var(--apple-white);
            border-radius: var(--radius);
            padding: 25px;
            text-align: center;
            border: 2px solid var(--apple-light-gray);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .payment-method:hover {
            border-color: var(--apple-blue);
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }
        
        .payment-method.selected {
            border-color: var(--apple-blue);
            background: rgba(0, 113, 227, 0.05);
        }
        
        .payment-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 24px;
            color: white;
        }
        
        .stripe-icon { background: var(--stripe-purple); }
        .paypal-icon { background: var(--paypal-blue); }
        .crypto-icon { background: #00a86b; }
        .card-icon { background: var(--apple-blue); }
        
        /* Payment Form */
        .payment-form {
            background: var(--apple-white);
            border-radius: var(--radius-lg);
            padding: 40px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: var(--card-shadow);
            display: none;
        }
        
        .payment-form.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .form-header h3 {
            font-size: 24px;
            color: var(--apple-black);
        }
        
        /* Card Input Styling */
        .card-element-container {
            margin: 25px 0;
        }
        
        .StripeElement {
            padding: 20px;
            border: 2px solid var(--apple-light-gray);
            border-radius: var(--radius);
            background: var(--apple-lighter-gray);
            transition: var(--transition);
        }
        
        .StripeElement--focus {
            border-color: var(--apple-blue);
            background: var(--apple-white);
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }
        
        .StripeElement--invalid {
            border-color: var(--apple-red);
        }
        
        .StripeElement--webkit-autofill {
            background-color: #fefde5 !important;
        }
        
        /* Payment Buttons */
        .payment-button {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: var(--radius);
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: var(--font-sf);
            margin-top: 20px;
        }
        
        .stripe-button {
            background: var(--stripe-purple);
            color: white;
        }
        
        .paypal-button {
            background: var(--paypal-blue);
            color: white;
        }
        
        .crypto-button {
            background: linear-gradient(135deg, #00a86b, #00d4aa);
            color: white;
        }
        
        .payment-button:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .payment-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* Subscription Plans */
        .plan-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .plan-option {
            background: var(--apple-lighter-gray);
            border-radius: var(--radius);
            padding: 25px;
            text-align: center;
            border: 2px solid transparent;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .plan-option:hover {
            background: var(--apple-white);
            border-color: var(--apple-light-gray);
        }
        
        .plan-option.selected {
            background: var(--apple-white);
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
        }
        
        .plan-price {
            font-size: 36px;
            font-weight: 700;
            color: var(--apple-black);
            margin: 15px 0;
        }
        
        .plan-period {
            font-size: 14px;
            color: var(--apple-gray);
        }
        
        /* Success Animation */
        .success-animation {
            text-align: center;
            padding: 60px 20px;
            display: none;
        }
        
        .success-animation.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }
        
        .checkmark {
            width: 80px;
            height: 80px;
            background: var(--apple-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            animation: scaleIn 0.5s ease-out;
        }
        
        .checkmark i {
            font-size: 36px;
            color: white;
        }
        
        @keyframes scaleIn {
            0% { transform: scale(0); }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Receipt */
        .receipt {
            background: var(--apple-white);
            border-radius: var(--radius);
            padding: 30px;
            margin: 30px auto;
            max-width: 600px;
            box-shadow: var(--card-shadow);
            display: none;
        }
        
        .receipt.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }
        
        .receipt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--apple-light-gray);
        }
        
        .receipt-details {
            display: grid;
            gap: 15px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--apple-light-gray);
        }
        
        .detail-row:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 18px;
            color: var(--apple-green);
        }
        
        /* Crypto Payment */
        .crypto-payment {
            text-align: center;
            padding: 30px;
            display: none;
        }
        
        .crypto-payment.active {
            display: block;
        }
        
        .crypto-address {
            background: var(--apple-lighter-gray);
            padding: 20px;
            border-radius: var(--radius);
            margin: 20px 0;
            word-break: break-all;
            font-family: monospace;
            font-size: 14px;
        }
        
        .qr-code {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background: #f8f9fa;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--apple-gray);
        }
        
        /* Subscription Management */
        .subscription-dashboard {
            background: var(--apple-white);
            border-radius: var(--radius-lg);
            padding: 40px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: var(--card-shadow);
            display: none;
        }
        
        .subscription-dashboard.active {
            display: block;
        }
        
        .subscription-info {
            background: var(--apple-lighter-gray);
            padding: 25px;
            border-radius: var(--radius);
            margin: 20px 0;
        }
        
        .manage-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .payment-options {
                grid-template-columns: 1fr;
            }
            
            .plan-options {
                grid-template-columns: 1fr;
            }
            
            .payment-form {
                padding: 25px;
            }
            
            .manage-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="apple-nav">
        <a href="#" class="nav-brand">
            <i class="fas fa-shield-alt"></i>
            SecurityScan Pro
        </a>
        <div id="userStatus">
            <span id="premiumStatus" style="color: var(--apple-gray); font-size: 14px;">
                <i class="fas fa-user"></i> Free Plan
            </span>
        </div>
    </nav>

    <!-- Hero Section -->
    <div style="padding: 140px 22px 60px; text-align: center; max-width: 980px; margin: 0 auto;">
        <h1 style="font-size: 56px; background: linear-gradient(120deg, var(--apple-black), var(--apple-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 16px;">
            SecurityScan Pro
        </h1>
        <p style="font-size: 24px; color: var(--apple-dark-gray); margin-bottom: 44px;">
            Choose your payment method and upgrade to premium
        </p>
        
        <!-- Free Scanner Demo -->
        <div style="background: var(--apple-white); border-radius: var(--radius-lg); padding: 40px; max-width: 800px; margin: 0 auto 60px; box-shadow: var(--card-shadow);">
            <div style="text-align: center; margin-bottom: 40px;">
                <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--apple-blue), #42a5ff); border-radius: 18px; display: flex; align-items: center; justify-content: center; margin: 0 auto 22px;">
                    <i class="fas fa-search" style="font-size: 28px; color: white;"></i>
                </div>
                <h2 style="font-size: 36px; font-weight: 700; margin-bottom: 8px;">Security Scanner</h2>
                <p style="font-size: 18px; color: var(--apple-gray);">Free version: 5 scans/day â€¢ Premium: Unlimited</p>
            </div>
            
            <div style="background: var(--apple-lighter-gray); padding: 20px; border-radius: var(--radius); margin: 25px 0;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span>Free scans used: <strong id="freeScans">0/5</strong></span>
                    <button onclick="startUpgrade()" style="background: var(--apple-blue); color: white; border: none; padding: 10px 20px; border-radius: var(--radius); font-size: 14px; cursor: pointer;">
                        Upgrade for Unlimited
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Selection -->
    <div style="padding: 60px 22px; max-width: 1000px; margin: 0 auto;">
        <h2 style="text-align: center; font-size: 42px; margin-bottom: 40px; color: var(--apple-black);">
            Choose Payment Method
        </h2>
        
        <div class="payment-options">
            <!-- Stripe -->
            <div class="payment-method" onclick="selectPaymentMethod('stripe')">
                <div class="payment-icon stripe-icon">
                    <i class="fab fa-stripe"></i>
                </div>
                <h3>Credit/Debit Card</h3>
                <p>Visa, Mastercard, Amex, Discover</p>
                <div style="margin-top: 15px; font-size: 13px; color: var(--apple-green);">
                    <i class="fas fa-shield-alt"></i> Secure â€¢ Fast â€¢ Worldwide
                </div>
            </div>
            
            <!-- PayPal -->
            <div class="payment-method" onclick="selectPaymentMethod('paypal')">
                <div class="payment-icon paypal-icon">
                    <i class="fab fa-paypal"></i>
                </div>
                <h3>PayPal</h3>
                <p>Pay with PayPal balance or card</p>
                <div style="margin-top: 15px; font-size: 13px; color: var(--apple-green);">
                    <i class="fas fa-globe"></i> Global â€¢ Trusted â€¢ Instant
                </div>
            </div>
            
            <!-- Crypto -->
            <div class="payment-method" onclick="selectPaymentMethod('crypto')">
                <div class="payment-icon crypto-icon">
                    <i class="fas fa-bitcoin"></i>
                </div>
                <h3>Cryptocurrency</h3>
                <p>Bitcoin, Ethereum, USDC</p>
                <div style="margin-top: 15px; font-size: 13px; color: var(--apple-green);">
                    <i class="fas fa-lock"></i> Private â€¢ Decentralized â€¢ Fast
                </div>
            </div>
        </div>
    </div>

    <!-- Plan Selection -->
    <div id="planSelection" style="display: none; padding: 60px 22px; max-width: 1000px; margin: 0 auto;">
        <h2 style="text-align: center; font-size: 42px; margin-bottom: 40px; color: var(--apple-black);">
            Select Your Plan
        </h2>
        
        <div class="plan-options">
            <!-- Monthly Plan -->
            <div class="plan-option" onclick="selectPlan('monthly')">
                <h3>Monthly</h3>
                <div class="plan-price">$9.99</div>
                <div class="plan-period">per month</div>
                <ul style="text-align: left; margin: 20px 0; list-style: none; padding: 0;">
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> Unlimited scans</li>
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> Real-time protection</li>
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> Cancel anytime</li>
                </ul>
            </div>
            
            <!-- Yearly Plan -->
            <div class="plan-option" onclick="selectPlan('yearly')">
                <div style="background: var(--apple-gold); color: #000; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: 600; display: inline-block; margin-bottom: 15px;">
                    MOST POPULAR
                </div>
                <h3>Yearly</h3>
                <div class="plan-price">$79.99</div>
                <div class="plan-period">per year</div>
                <div style="color: var(--apple-green); font-weight: 600; margin: 10px 0;">
                    Save $40/year
                </div>
                <ul style="text-align: left; margin: 20px 0; list-style: none; padding: 0;">
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> Everything in Monthly</li>
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> +3 team members</li>
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> Priority support</li>
                </ul>
            </div>
            
            <!-- Lifetime -->
            <div class="plan-option" onclick="selectPlan('lifetime')">
                <h3>Lifetime</h3>
                <div class="plan-price">$199</div>
                <div class="plan-period">one-time payment</div>
                <div style="color: var(--apple-green); font-weight: 600; margin: 10px 0;">
                    Best Value
                </div>
                <ul style="text-align: left; margin: 20px 0; list-style: none; padding: 0;">
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> Pay once, use forever</li>
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> All future updates</li>
                    <li style="margin: 10px 0;"><i class="fas fa-check" style="color: var(--apple-green);"></i> VIP support</li>
                </ul>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px;">
            <button id="continueToPayment" onclick="continueToPayment()" style="background: var(--apple-blue); color: white; border: none; padding: 16px 40px; border-radius: var(--radius); font-size: 17px; font-weight: 600; cursor: pointer;">
                Continue to Payment <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- Stripe Payment Form -->
    <div id="stripePaymentForm" class="payment-form">
        <div class="form-header">
            <div class="payment-icon stripe-icon" style="width: 50px; height: 50px;">
                <i class="fab fa-stripe"></i>
            </div>
            <div>
                <h3>Credit/Debit Card Payment</h3>
                <p style="color: var(--apple-gray);">Secure payment powered by Stripe</p>
            </div>
        </div>
        
        <div style="background: var(--apple-lighter-gray); padding: 20px; border-radius: var(--radius); margin-bottom: 25px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong id="selectedPlanName">Monthly Plan</strong>
                    <div style="font-size: 14px; color: var(--apple-gray);" id="selectedPlanDetails">$9.99/month</div>
                </div>
                <button onclick="changePlan()" style="background: transparent; border: 1px solid var(--apple-light-gray); color: var(--apple-blue); padding: 8px 16px; border-radius: var(--radius); cursor: pointer;">
                    Change Plan
                </button>
            </div>
        </div>
        
        <div class="card-element-container">
            <label style="display: block; margin-bottom: 10px; font-weight: 600;">Card Information</label>
            <div id="card-element"></div>
        </div>
        
        <div id="card-errors" style="color: var(--apple-red); margin: 15px 0; min-height: 20px;"></div>
        
        <button id="stripeSubmit" class="payment-button stripe-button" onclick="processStripePayment()">
            <i class="fas fa-lock"></i> Pay $<span id="paymentAmount">9.99</span>
            <span id="stripeLoading" style="display: none; margin-left: 10px;">
                <i class="fas fa-spinner fa-spin"></i>
            </span>
        </button>
        
        <div style="text-align: center; margin-top: 25px; color: var(--apple-gray); font-size: 14px;">
            <i class="fas fa-shield-alt"></i> Payments secured by Stripe. Your card details are never stored on our servers.
        </div>
    </div>

    <!-- PayPal Payment Form -->
    <div id="paypalPaymentForm" class="payment-form">
        <div class="form-header">
            <div class="payment-icon paypal-icon" style="width: 50px; height: 50px;">
                <i class="fab fa-paypal"></i>
            </div>
            <div>
                <h3>PayPal Payment</h3>
                <p style="color: var(--apple-gray);">Pay with PayPal or credit card</p>
            </div>
        </div>
        
        <div style="background: var(--apple-lighter-gray); padding: 20px; border-radius: var(--radius); margin-bottom: 25px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong id="paypalPlanName">Monthly Plan</strong>
                    <div style="font-size: 14px; color: var(--apple-gray);" id="paypalPlanDetails">$9.99/month</div>
                </div>
                <button onclick="changePlan()" style="background: transparent; border: 1px solid var(--apple-light-gray); color: var(--apple-blue); padding: 8px 16px; border-radius: var(--radius); cursor: pointer;">
                    Change Plan
                </button>
            </div>
        </div>
        
        <div id="paypal-button-container"></div>
        
        <div style="text-align: center; margin-top: 25px; color: var(--apple-gray); font-size: 14px;">
            <i class="fas fa-globe"></i> PayPal accepted in 200+ countries. No account needed for credit card payments.
        </div>
    </div>

    <!-- Crypto Payment Form -->
    <div id="cryptoPaymentForm" class="payment-form">
        <div class="form-header">
            <div class="payment-icon crypto-icon" style="width: 50px; height: 50px;">
                <i class="fas fa-bitcoin"></i>
            </div>
            <div>
                <h3>Cryptocurrency Payment</h3>
                <p style="color: var(--apple-gray);">Pay with Bitcoin, Ethereum, or USDC</p>
            </div>
        </div>
        
        <div style="background: var(--apple-lighter-gray); padding: 20px; border-radius: var(--radius); margin-bottom: 25px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <strong id="cryptoPlanName">Monthly Plan</strong>
                    <div style="font-size: 14px; color: var(--apple-gray);" id="cryptoPlanDetails">$9.99/month</div>
                </div>
                <button onclick="changePlan()" style="background: transparent; border: 1px solid var(--apple-light-gray); color: var(--apple-blue); padding: 8px 16px; border-radius: var(--radius); cursor: pointer;">
                    Change Plan
                </button>
            </div>
        </div>
        
        <div class="crypto-payment" id="bitcoinPayment">
            <h4>Pay with Bitcoin</h4>
            <div class="qr-code">
                <i class="fas fa-qrcode" style="font-size: 48px; color: var(--apple-gray);"></i>
            </div>
            <div class="crypto-address" id="bitcoinAddress">
                3E8ociqZa9mZUSwGdSmAEMAoAxBK3FNDcd
            </div>
            <p style="color: var(--apple-gray); font-size: 14px; margin: 15px 0;">
                Send exact amount: <strong id="bitcoinAmount">0.00032 BTC</strong>
            </p>
            <div style="background: #fff3cd; padding: 15px; border-radius: var(--radius); margin: 20px 0;">
                <p style="margin: 0; color: #856404; font-size: 13px;">
                    <i class="fas fa-exclamation-triangle"></i>
                    Payment will be confirmed after 3 blockchain confirmations (â‰ˆ30 minutes)
                </p>
            </div>
        </div>
        
        <div style="display: flex; gap: 15px; margin-top: 30px;">
            <button class="payment-button" onclick="showCryptoOption('bitcoin')" style="flex: 1; background: #f7931a;">
                <i class="fab fa-bitcoin"></i> Bitcoin
            </button>
            <button class="payment-button" onclick="showCryptoOption('ethereum')" style="flex: 1; background: #627eea;">
                <i class="fab fa-ethereum"></i> Ethereum
            </button>
            <button class="payment-button" onclick="showCryptoOption('usdc')" style="flex: 1; background: #2775ca;">
                <i class="fas fa-coins"></i> USDC
            </button>
        </div>
    </div>

    <!-- Success Animation -->
    <div id="successAnimation" class="success-animation">
        <div class="checkmark">
            <i class="fas fa-check"></i>
        </div>
        <h2 style="font-size: 36px; margin-bottom: 20px; color: var(--apple-black);">
            Payment Successful! ðŸŽ‰
        </h2>
        <p style="font-size: 18px; color: var(--apple-gray); margin-bottom: 40px; max-width: 500px; margin-left: auto; margin-right: auto;">
            Thank you for upgrading to SecurityScan Pro! Your premium features are now being activated.
        </p>
        <div style="display: flex; gap: 15px; justify-content: center;">
            <button onclick="activatePremium()" style="background: var(--apple-blue); color: white; border: none; padding: 15px 40px; border-radius: var(--radius); font-size: 16px; cursor: pointer;">
                <i class="fas fa-lock-open"></i> Activate Premium Now
            </button>
            <button onclick="viewReceipt()" style="background: transparent; border: 2px solid var(--apple-light-gray); color: var(--apple-black); padding: 15px 40px; border-radius: var(--radius); font-size: 16px; cursor: pointer;">
                <i class="fas fa-receipt"></i> View Receipt
            </button>
        </div>
    </div>

    <!-- Receipt -->
    <div id="receipt" class="receipt">
        <div class="receipt-header">
            <h3 style="color: var(--apple-black);">Payment Receipt</h3>
            <div style="font-size: 14px; color: var(--apple-gray);">
                <i class="fas fa-calendar"></i> <span id="receiptDate">Today</span>
            </div>
        </div>
        
        <div class="receipt-details">
            <div class="detail-row">
                <span>Transaction ID:</span>
                <span id="transactionId">STR-123456789</span>
            </div>
            <div class="detail-row">
                <span>Plan:</span>
                <span id="receiptPlan">Monthly Plan</span>
            </div>
            <div class="detail-row">
                <span>Amount:</span>
                <span id="receiptAmount">$9.99</span>
            </div>
            <div class="detail-row">
                <span>Payment Method:</span>
                <span id="receiptMethod">Credit Card (Stripe)</span>
            </div>
            <div class="detail-row">
                <span>Status:</span>
                <span style="color: var(--apple-green); font-weight: 600;">Completed</span>
            </div>
            <div class="detail-row">
                <span>Total Paid:</span>
                <span id="receiptTotal">$9.99</span>
            </div>
        </div>
        
        <div style="margin-top: 30px; text-align: center;">
            <button onclick="printReceipt()" style="background: transparent; border: 2px solid var(--apple-light-gray); color: var(--apple-black); padding: 12px 30px; border-radius: var(--radius); font-size: 15px; cursor: pointer; margin-right: 10px;">
                <i class="fas fa-print"></i> Print Receipt
            </button>
            <button onclick="activatePremium()" style="background: var(--apple-blue); color: white; border: none; padding: 12px 30px; border-radius: var(--radius); font-size: 15px; cursor: pointer;">
                <i class="fas fa-rocket"></i> Start Using Premium
            </button>
        </div>
    </div>

    <!-- Subscription Management -->
    <div id="subscriptionDashboard" class="subscription-dashboard">
        <h2 style="margin-bottom: 30px; color: var(--apple-black);">
            <i class="fas fa-crown"></i> Your Premium Subscription
        </h2>
        
        <div class="subscription-info">
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                <div>
                    <strong>Current Plan:</strong>
                    <div id="currentPlan">Monthly Plan</div>
                </div>
                <div style="text-align: right;">
                    <strong>Next Billing:</strong>
                    <div id="nextBilling">Jan 15, 2024</div>
                </div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                <div>
                    <strong>Status:</strong>
                    <div style="color: var(--apple-green); font-weight: 600;">Active</div>
                </div>
                <div style="text-align: right;">
                    <strong>Amount:</strong>
                    <div id="billingAmount">$9.99/month</div>
                </div>
            </div>
        </div>
        
        <div class="manage-buttons">
            <button onclick="upgradeSubscription()" style="flex: 1; background: var(--apple-blue); color: white; border: none; padding: 15px; border-radius: var(--radius); cursor: pointer;">
                <i class="fas fa-arrow-up"></i> Upgrade Plan
            </button>
            <button onclick="cancelSubscription()" style="flex: 1; background: transparent; border: 2px solid var(--apple-light-gray); color: var(--apple-black); padding: 15px; border-radius: var(--radius); cursor: pointer;">
                <i class="fas fa-ban"></i> Cancel Subscription
            </button>
            <button onclick="updatePaymentMethod()" style="flex: 1; background: transparent; border: 2px solid var(--apple-light-gray); color: var(--apple-black); padding: 15px; border-radius: var(--radius); cursor: pointer;">
                <i class="fas fa-credit-card"></i> Update Payment
            </button>
        </div>
        
        <div style="margin-top: 40px;">
            <h4 style="margin-bottom: 20px;">Billing History</h4>
            <div style="background: var(--apple-lighter-gray); border-radius: var(--radius); overflow: hidden;">
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; padding: 15px 20px; background: var(--apple-light-gray); font-weight: 600;">
                    <div>Date</div>
                    <div>Amount</div>
                    <div>Status</div>
                </div>
                <div id="billingHistory" style="max-height: 200px; overflow-y: auto;">
                    <!-- Billing history will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Backend Simulation -->
    <script>
        // ===== CONFIGURATION =====
        const CONFIG = {
            STRIPE_PUBLIC_KEY: 'pk_test_51Hx...', // Replace with your test key
            PAYPAL_CLIENT_ID: 'AeK...', // Replace with your PayPal client ID
            PRICES: {
                monthly: 9.99,
                yearly: 79.99,
                lifetime: 199
            },
            CRYPTO_RATES: {
                btc: 45000, // BTC in USD
                eth: 3000,  // ETH in USD
                usdc: 1     // USDC = 1 USD
            }
        };
        
        // ===== STATE MANAGEMENT =====
        let paymentState = {
            selectedMethod: null,
            selectedPlan: 'monthly',
            userData: {
                isPremium: false,
                subscription: null,
                paymentHistory: []
            }
        };
        
        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            loadUserState();
            setupPaymentOptions();
            
            // Test Stripe Elements (for demo)
            setTimeout(() => {
                setupStripeElements();
            }, 1000);
            
            // Initialize PayPal buttons
            loadPayPalSDK();
            
            // Update free scans display
            updateFreeScans();
        });
        
        function loadUserState() {
            const saved = localStorage.getItem('securityscan_payment_state');
            if (saved) {
                paymentState.userData = JSON.parse(saved);
                
                if (paymentState.userData.isPremium) {
                    document.getElementById('premiumStatus').innerHTML = 
                        '<i class="fas fa-crown" style="color: var(--apple-gold);"></i> Premium User';
                    document.getElementById('premiumStatus').style.color = 'var(--apple-gold)';
                    showSubscriptionDashboard();
                }
            }
        }
        
        function saveUserState() {
            localStorage.setItem('securityscan_payment_state', JSON.stringify(paymentState.userData));
        }
        
        // ===== PAYMENT SELECTION =====
        function setupPaymentOptions() {
            const methods = document.querySelectorAll('.payment-method');
            methods.forEach(method => {
                method.addEventListener('click', function() {
                    methods.forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });
        }
        
        function selectPaymentMethod(method) {
            paymentState.selectedMethod = method;
            
            // Hide all payment forms
            document.querySelectorAll('.payment-form').forEach(form => {
                form.classList.remove('active');
            });
            
            // Show plan selection
            document.getElementById('planSelection').style.display = 'block';
            document.getElementById('planSelection').scrollIntoView({ behavior: 'smooth' });
            
            // Highlight selected method
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }
        
        function selectPlan(plan) {
            paymentState.selectedPlan = plan;
            
            // Update plan selection UI
            document.querySelectorAll('.plan-option').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // Enable continue button
            document.getElementById('continueToPayment').disabled = false;
        }
        
        function continueToPayment() {
            if (!paymentState.selectedMethod || !paymentState.selectedPlan) {
                alert('Please select a payment method and plan');
                return;
            }
            
            // Hide plan selection
            document.getElementById('planSelection').style.display = 'none';
            
            // Show appropriate payment form
            const formId = paymentState.selectedMethod + 'PaymentForm';
            const form = document.getElementById(formId);
            form.classList.add('active');
            form.scrollIntoView({ behavior: 'smooth' });
            
            // Update payment form with selected plan
            updatePaymentForm();
            
            // Initialize payment method
            if (paymentState.selectedMethod === 'stripe') {
                setupStripePayment();
            } else if (paymentState.selectedMethod === 'paypal') {
                setupPayPalPayment();
            } else if (paymentState.selectedMethod === 'crypto') {
                setupCryptoPayment();
            }
        }
        
        function updatePaymentForm() {
            const plan = paymentState.selectedPlan;
            const amount = CONFIG.PRICES[plan];
            const planName = getPlanName(plan);
            
            // Update all forms
            document.getElementById('selectedPlanName').textContent = planName;
            document.getElementById('selectedPlanDetails').textContent = 
                plan === 'lifetime' ? 'One-time payment' : `$${amount}/${plan === 'monthly' ? 'month' : 'year'}`;
            document.getElementById('paymentAmount').textContent = amount;
            
            document.getElementById('paypalPlanName').textContent = planName;
            document.getElementById('paypalPlanDetails').textContent = 
                plan === 'lifetime' ? 'One-time payment' : `$${amount}/${plan === 'monthly' ? 'month' : 'year'}`;
            
            document.getElementById('cryptoPlanName').textContent = planName;
            document.getElementById('cryptoPlanDetails').textContent = 
                plan === 'lifetime' ? 'One-time payment' : `$${amount}/${plan === 'monthly' ? 'month' : 'year'}`;
            
            // Update crypto amounts
            updateCryptoAmounts(amount);
        }
        
        function getPlanName(plan) {
            switch(plan) {
                case 'monthly': return 'Monthly Plan';
                case 'yearly': return 'Yearly Plan';
                case 'lifetime': return 'Lifetime Access';
                default: return 'Monthly Plan';
            }
        }
        
        // ===== STRIPE PAYMENT =====
        let stripe = null;
        let elements = null;
        let card = null;
        
        function setupStripeElements() {
            // For demo purposes - in production, use your real Stripe key
            stripe = Stripe('pk_test_51Hx...'); // Test key
            
            elements = stripe.elements();
            card = elements.create('card', {
                style: {
                    base: {
                        fontSize: '16px',
                        color: '#32325d',
                        fontFamily: var(--font-sf),
                        '::placeholder': {
                            color: '#aab7c4'
                        }
                    },
                    invalid: {
                        color: '#fa755a'
                    }
                }
            });
            
            card.mount('#card-element');
            
            card.on('change', function(event) {
                const displayError = document.getElementById('card-errors');
                if (event.error) {
                    displayError.textContent = event.error.message;
                } else {
                    displayError.textContent = '';
                }
            });
        }
        
        function setupStripePayment() {
            // Already initialized in setupStripeElements
        }
        
        async function processStripePayment() {
            const submitButton = document.getElementById('stripeSubmit');
            const loading = document.getElementById('stripeLoading');
            
            // Show loading
            submitButton.disabled = true;
            loading.style.display = 'inline-block';
            
            try {
                // In production, you would call your backend here
                // const response = await fetch('/create-payment-intent', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify({
                //         amount: CONFIG.PRICES[paymentState.selectedPlan] * 100, // in cents
                //         plan: paymentState.selectedPlan
                //     })
                // });
                // const { clientSecret } = await response.json();
                
                // For demo, simulate payment
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Simulate successful payment
                simulatePaymentSuccess({
                    method: 'stripe',
                    amount: CONFIG.PRICES[paymentState.selectedPlan],
                    plan: paymentState.selectedPlan,
                    transactionId: 'STR-' + Math.random().toString(36).substr(2, 9).toUpperCase()
                });
                
            } catch (error) {
                alert('Payment failed: ' + error.message);
                submitButton.disabled = false;
                loading.style.display = 'none';
            }
        }
        
        // ===== PAYPAL PAYMENT =====
        function loadPayPalSDK() {
            const script = document.createElement('script');
            script.src = `https://www.paypal.com/sdk/js?client-id=${CONFIG.PAYPAL_CLIENT_ID}&currency=USD`;
            script.onload = function() {
                setupPayPalPayment();
            };
            document.head.appendChild(script);
        }
        
        function setupPayPalPayment() {
            if (!window.paypal) return;
            
            paypal.Buttons({
                createOrder: function(data, actions) {
                    const amount = CONFIG.PRICES[paymentState.selectedPlan];
                    
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: amount.toString(),
                                currency_code: 'USD'
                            },
                            description: `SecurityScan Pro - ${getPlanName(paymentState.selectedPlan)}`
                        }],
                        application_context: {
                            shipping_preference: 'NO_SHIPPING'
                        }
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        // Payment completed
                        simulatePaymentSuccess({
                            method: 'paypal',
                            amount: CONFIG.PRICES[paymentState.selectedPlan],
                            plan: paymentState.selectedPlan,
                            transactionId: details.id,
                            payerEmail: details.payer.email_address
                        });
                    });
                },
                onError: function(err) {
                    alert('PayPal payment failed: ' + err.message);
                },
                style: {
                    layout: 'vertical',
                    color: 'blue',
                    shape: 'rect',
                    label: 'paypal'
                }
            }).render('#paypal-button-container');
        }
        
        // ===== CRYPTO PAYMENT =====
        function setupCryptoPayment() {
            updateCryptoAmounts(CONFIG.PRICES[paymentState.selectedPlan]);
            showCryptoOption('bitcoin');
        }
        
        function updateCryptoAmounts(usdAmount) {
            const btcAmount = (usdAmount / CONFIG.CRYPTO_RATES.btc).toFixed(8);
            const ethAmount = (usdAmount / CONFIG.CRYPTO_RATES.eth).toFixed(6);
            
            document.getElementById('bitcoinAmount').textContent = btcAmount + ' BTC';
            // In production, you would generate fresh addresses
        }
        
        function showCryptoOption(option) {
            document.querySelectorAll('.crypto-payment').forEach(el => {
                el.classList.remove('active');
            });
            
            document.getElementById(option + 'Payment').classList.add('active');
            
            // Simulate payment monitoring
            if (option === 'bitcoin') {
                startPaymentMonitoring();
            }
        }
        
        function startPaymentMonitoring() {
            // In production, you would poll your backend or use webhooks
            // to check for confirmed crypto payments
            console.log('Starting crypto payment monitoring...');
        }
        
        // ===== PAYMENT SUCCESS HANDLING =====
        function simulatePaymentSuccess(paymentData) {
            // Store payment data
            paymentState.userData.paymentHistory.push({
                ...paymentData,
                date: new Date().toISOString(),
                status: 'completed'
            });
            
            // Hide payment forms
            document.querySelectorAll('.payment-form').forEach(form => {
                form.classList.remove('active');
            });
            
            // Show success animation
            document.getElementById('successAnimation').classList.add('active');
            document.getElementById('successAnimation').scrollIntoView({ behavior: 'smooth' });
            
            // Generate receipt data
            generateReceipt(paymentData);
            
            // Save state
            saveUserState();
        }
        
        function generateReceipt(paymentData) {
            const now = new Date();
            const receiptDate = now.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('receiptDate').textContent = receiptDate;
            document.getElementById('transactionId').textContent = paymentData.transactionId;
            document.getElementById('receiptPlan').textContent = getPlanName(paymentData.plan);
            document.getElementById('receiptAmount').textContent = `$${paymentData.amount}`;
            
            let methodName = '';
            switch(paymentData.method) {
                case 'stripe': methodName = 'Credit Card (Stripe)'; break;
                case 'paypal': methodName = 'PayPal'; break;
                case 'crypto': methodName = 'Cryptocurrency'; break;
            }
            
            document.getElementById('receiptMethod').textContent = methodName;
            document.getElementById('receiptTotal').textContent = `$${paymentData.amount}`;
        }
        
        // ===== PREMIUM ACTIVATION =====
        function activatePremium() {
            paymentState.userData.isPremium = true;
            paymentState.userData.subscription = {
                plan: paymentState.selectedPlan,
                startDate: new Date().toISOString(),
                endDate: paymentState.selectedPlan === 'lifetime' ? null : 
                         paymentState.selectedPlan === 'monthly' ? 
                         new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() :
                         new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString()
            };
            
            // Update UI
            document.getElementById('premiumStatus').innerHTML = 
                '<i class="fas fa-crown" style="color: var(--apple-gold);"></i> Premium User';
            document.getElementById('premiumStatus').style.color = 'var(--apple-gold)';
            
            // Hide success animation and receipt
            document.getElementById('successAnimation').classList.remove('active');
            document.getElementById('receipt').classList.remove('active');
            
            // Show subscription dashboard
            showSubscriptionDashboard();
            
            // Save state
            saveUserState();
            
            // Show success message
            alert('ðŸŽ‰ Premium features activated! You now have unlimited scans and access to all premium features.');
        }
        
        function viewReceipt() {
            document.getElementById('successAnimation').classList.remove('active');
            document.getElementById('receipt').classList.add('active');
            document.getElementById('receipt').scrollIntoView({ behavior: 'smooth' });
        }
        
        // ===== SUBSCRIPTION MANAGEMENT =====
        function showSubscriptionDashboard() {
            if (!paymentState.userData.isPremium) return;
            
            // Update dashboard info
            const sub = paymentState.userData.subscription;
            document.getElementById('currentPlan').textContent = getPlanName(sub.plan);
            document.getElementById('billingAmount').textContent = 
                sub.plan === 'lifetime' ? 'One-time payment' : 
                `$${CONFIG.PRICES[sub.plan]}/${sub.plan === 'monthly' ? 'month' : 'year'}`;
            
            if (sub.endDate) {
                const end = new Date(sub.endDate);
                document.getElementById('nextBilling').textContent = end.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            } else {
                document.getElementById('nextBilling').textContent = 'Never (Lifetime)';
            }
            
            // Populate billing history
            const historyContainer = document.getElementById('billingHistory');
            historyContainer.innerHTML = '';
            
            paymentState.userData.paymentHistory.forEach(payment => {
                const date = new Date(payment.date);
                const row = document.createElement('div');
                row.style.display = 'grid';
                row.style.gridTemplateColumns = '2fr 1fr 1fr';
                row.style.padding = '15px 20px';
                row.style.borderBottom = '1px solid var(--apple-light-gray)';
                
                row.innerHTML = `
                    <div>${date.toLocaleDateString()}</div>
                    <div>$${payment.amount}</div>
                    <div style="color: var(--apple-green);">${payment.status}</div>
                `;
                
                historyContainer.appendChild(row);
            });
            
            // Show dashboard
            document.getElementById('subscriptionDashboard').classList.add('active');
            document.getElementById('subscriptionDashboard').scrollIntoView({ behavior: 'smooth' });
        }
        
        function upgradeSubscription() {
            // Reset payment flow
            paymentState.selectedMethod = null;
            paymentState.selectedPlan = null;
            
            // Hide dashboard
            document.getElementById('subscriptionDashboard').classList.remove('active');
            
            // Show payment methods
            document.querySelector('.payment-options').parentElement.scrollIntoView({ behavior: 'smooth' });
        }
        
        function cancelSubscription() {
            if (confirm('Are you sure you want to cancel your subscription?')) {
                paymentState.userData.isPremium = false;
                paymentState.userData.subscription = null;
                
                // Update UI
                document.getElementById('premiumStatus').innerHTML = 
                    '<i class="fas fa-user"></i> Free Plan';
                document.getElementById('premiumStatus').style.color = 'var(--apple-gray)';
                
                document.getElementById('subscriptionDashboard').classList.remove('active');
                
                // Save state
                saveUserState();
                
                alert('Your subscription has been cancelled. You can still use free features.');
            }
        }
        
        function updatePaymentMethod() {
            alert('Redirecting to payment method update...');
            // In production, redirect to Stripe Customer Portal
        }
        
        // ===== UTILITY FUNCTIONS =====
        function startUpgrade() {
            document.querySelector('.payment-options').scrollIntoView({ behavior: 'smooth' });
        }
        
        function changePlan() {
            document.getElementById('planSelection').style.display = 'block';
            document.querySelectorAll('.payment-form').forEach(form => {
                form.classList.remove('active');
            });
            document.getElementById('planSelection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateFreeScans() {
            const scansUsed = parseInt(localStorage.getItem('free_scans_used') || '0');
            document.getElementById('freeScans').textContent = `${scansUsed}/5`;
        }
        
        function printReceipt() {
            const receipt = document.getElementById('receipt');
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Payment Receipt - SecurityScan Pro</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 40px; }
                        .header { text-align: center; margin-bottom: 30px; }
                        .logo { font-size: 24px; font-weight: bold; color: #0071e3; }
                        .details { margin: 30px 0; }
                        .row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee; }
                        .footer { margin-top: 40px; text-align: center; color: #666; font-size: 12px; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <div class="logo">SecurityScan Pro</div>
                        <div>Payment Receipt</div>
                    </div>
                    <div class="details">
                        ${receipt.innerHTML}
                    </div>
                    <div class="footer">
                        Thank you for your purchase!<br>
                        For support: support@securityscanpro.com
                    </div>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }
        
        // ===== DEMO MODE HELPERS =====
        window.demoMode = {
            simulatePayment: function(method = 'stripe', plan = 'monthly') {
                selectPaymentMethod(method);
                selectPlan(plan);
                continueToPayment();
                
                setTimeout(() => {
                    simulatePaymentSuccess({
                        method: method,
                        amount: CONFIG.PRICES[plan],
                        plan: plan,
                        transactionId: 'DEMO-' + Math.random().toString(36).substr(2, 9).toUpperCase()
                    });
                }, 1000);
            },
            
            resetAll: function() {
                localStorage.removeItem('securityscan_payment_state');
                localStorage.removeItem('free_scans_used');
                location.reload();
            }
        };
        
        console.log('Demo mode available. Try:');
        console.log('demoMode.simulatePayment("stripe", "monthly")');
        console.log('demoMode.resetAll()');
    </script>
    
    <!-- Stripe JS -->
    <script src="https://js.stripe.com/v3/"></script>
</body>
</html>
